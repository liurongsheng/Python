### 主图叠加__蛟龙出水

```
A1:=DATE <= 13181231;
工作线:(EMA(C,14)) * A1,POINTDOT,LINETHICK5,COLORYELLOW;

AA05:MA(C,5),LINETHICK3,COLOR0099CC;
五日乖离率:=(C-AA05)/AA05*100;
BB05:=ATAN((AA05/REF(AA05,1)-1)*100)*180/3.1416;
速度5:=SMA(EMA((AA05-REF(AA05,1))/REF(AA05,1),3)*100,3,1);
加速度5:EMA((速度5-REF(速度5,1)),3),NODRAW;
IF(BB05>30 AND AA05>REF(AA05,1), AA05,DRAWNULL),LINETHICK2,COLORRED;
AA10:MA(C,10), LINETHICK0;
AA20:=MA(C,20);
BB10:=ATAN((AA10/REF(AA10,1)-1)*100)*180/3.1416;
IF(BB05<0 AND AA05<REF(AA05,1), AA05,DRAWNULL),LINETHICK2,COLORFFFF00;
AA30:MA(C,30), LINETHICK0;
三拾日乖离率:(C-AA30)/AA30*100,NODRAW;
VAR1:=(AA20-AA30)>REF((AA20-AA30),1) AND AA20>REF(AA20,1) AND AA30>REF(AA30,1);
VAR2:=(AA30-AA20)<REF((AA30-AA20),1) AND AA20<REF(AA20,1) AND AA30<REF(AA30,1);
BB30:=ATAN((AA30/REF(AA30,1)-1)*100)*180/3.1416;
强势狙击:=FILTER(BB30>30 AND BB10>45 AND CROSS(BB05,60),10);
加仓:=FILTER(COUNT(CROSS(BB05,30),5)>=1 AND AA05>REF(AA05,1)  AND 三拾日乖离率>REF(三拾日乖离率,1) AND AA10>REF(AA10,1)
AND 加速度5>REF(加速度5,1) AND 速度5>REF(速度5,1)  ,10) ;
清仓:=FILTER(COUNT(CROSS(30,BB05),5)>=1 AND (C>AA30 OR O>AA30) AND AA05<REF(AA05,1)  AND 三拾日乖离率<REF(三拾日乖离率,1) AND AA10<REF(AA10,1),10);
DRAWTEXT(加仓 ,LOW*0.98,'←-----加仓'),COLORYELLOW;
JC:=CROSS(0,五日乖离率) AND 三拾日乖离率<REF(三拾日乖离率,1) AND AA10>REF(AA10,1) ;
减仓:=FILTER(JC,10);
MR:=COUNT(CROSS(五日乖离率,0),3)>=1 AND 三拾日乖离率>REF(三拾日乖离率,1) AND AA05>REF(AA05,1) AND (C/REF(C,1)-1)*100>5 AND REF(C,1)<AA30;
买入:=FILTER(MR,10);
DRAWTEXT(减仓,HIGH*1.02,'←减仓'),COLORCYAN;
DRAWTEXT(买入,LOW*0.98,'←买入'),COLORYELLOW;

TYP:=(HIGH+LOW+CLOSE)/3;
CCI:=(TYP-MA(TYP,14))/(0.015*AVEDEV(TYP,14));

VAR5:=CROSS(CCI,-100);
VAR6:=CCI>=200;
DRAWTEXT(VAR6,HIGH*1.02,'←----小心'),COLORYELLOW;

SJ:=VAR5;
STICKLINE(SJ,H,L,0.6,0),COLORYELLOW;

LC:=REF(CLOSE,1);
RSI:=SMA(MAX(CLOSE-LC,0),6,1)/SMA(ABS(CLOSE-LC),6,1)*100;
DRAWTEXT(CROSS(84,RSI) , HIGH,'←-----逃'),COLORGREEN;
VAR3AA:=IF((CLOSE>REF(CLOSE,1)),88,0);
VAR4AA:=IF(((CLOSE)/(REF(CLOSE,1))>1.05) AND ((HIGH)/(CLOSE)<1.01) AND (VAR3AA>0),91,0);
DRAWTEXT(FILTER((VAR4AA>90),45),(LOW)*(0.93),'←---大胆搏 '),COLORYELLOW;

A:=(3*C+L+O+H)/6;
X:=(20*A+19*REF(A,1)+18*REF(A,2)+17*REF(A,3)+16*REF(A,4)+15*REF(A,5)+
14*REF(A,6)+13*REF(A,7)+12*REF(A,8)+11*REF(A,9)+10*REF(A,10)+9*REF(A,11)+8*REF(A,12)
+7*REF(A,13)+6*REF(A,14)+5*REF(A,15)+4*REF(A,16)+3*REF(A,17)+2*REF(A,18)+
REF(A,20))/210;
生命线:EMA(X,13),LINETHICK2,COLORMAGENTA;
```

### 动态翻译

```
A1赋值:日期 <= 13181231
输出工作线:(收盘价的14日指数移动平均) * A1,POINTDOT,线宽为5,画黄色
输出AA05:收盘价的5日简单移动平均,线宽为3,COLOR0099CC
五日乖离率赋值:(收盘价-AA05)/AA05*100
BB05赋值:(AA05/1日前的AA05-1)*100的反正切*180/3.1416
速度5赋值:(AA05-1日前的AA05)/1日前的AA05的3日指数移动平均*100的3日[1日权重]移动平均
输出加速度5:(速度5-1日前的速度5)的3日指数移动平均,NODRAW
如果BB05>30ANDAA05>1日前的AA05,返回AA05,否则返回无效数,线宽为2,画红色
输出AA10:收盘价的10日简单移动平均, 线宽为0
AA20赋值:收盘价的20日简单移动平均
BB10赋值:(AA10/1日前的AA10-1)*100的反正切*180/3.1416
如果BB05<0ANDAA05<1日前的AA05,返回AA05,否则返回无效数,线宽为2,COLORFFFF00
输出AA30:收盘价的30日简单移动平均, 线宽为0
输出三拾日乖离率:(收盘价-AA30)/AA30*100,NODRAW
VAR1赋值:(AA20-AA30)>1日前的(AA20-AA30) AND AA20>1日前的AA20 AND AA30>1日前的AA30
VAR2赋值:(AA30-AA20)<1日前的(AA30-AA20) AND AA20<1日前的AA20 AND AA30<1日前的AA30
BB30赋值:(AA30/1日前的AA30-1)*100的反正切*180/3.1416
强势狙击赋值:BB30>30ANDBB10>45ANDCROSS(BB05,60)的10日过滤
加仓赋值:统计5日中满足BB05上穿30的天数>=1ANDAA05>1日前的AA05AND三拾日乖离率>1日前的三拾日乖离率ANDAA10>1日前的AA10AND加速度5>1日前的加速度5AND速度5>1日前的速度5的10日过滤 
清仓赋值:统计5日中满足30上穿BB05的天数>=1AND(收盘价>AA30ORO>AA30)ANDAA05<1日前的AA05AND三拾日乖离率<1日前的三拾日乖离率ANDAA10<1日前的AA10的10日过滤
当满足条件加仓时,在最低价*0.98位置书写文字,画黄色
JC赋值:0上穿五日乖离率 AND 三拾日乖离率<1日前的三拾日乖离率 AND AA10>1日前的AA10 
减仓赋值:JC的10日过滤
MR赋值:统计3日中满足五日乖离率上穿0的天数>=1 AND 三拾日乖离率>1日前的三拾日乖离率 AND AA05>1日前的AA05 AND (收盘价/1日前的收盘价-1)*100>5 AND 1日前的收盘价<AA30
买入赋值:MR的10日过滤
当满足条件减仓时,在最高价*1.02位置书写文字,画青色
当满足条件买入时,在最低价*0.98位置书写文字,画黄色
TYP赋值:(最高价+最低价+收盘价)/3
CCI赋值:(TYP-TYP的14日简单移动平均)/(0.015*TYP的14日平均绝对偏差)
VAR5赋值:CCI上穿-100
VAR6赋值:CCI>=200
当满足条件VAR6时,在最高价*1.02位置书写文字,画黄色
SJ赋值:VAR5
当满足条件SJ时,在最高价和最低价位置之间画柱状线,宽度为0.6,0不为0则画空心柱.,画黄色
LC赋值:1日前的收盘价
RSI赋值:收盘价-LC和0的较大值的6日[1日权重]移动平均/收盘价-LC的绝对值的6日[1日权重]移动平均*100
当满足条件84上穿RSI时,在最高价位置书写文字,画绿色
VAR3AA赋值:如果(收盘价>1日前的收盘价),返回88,否则返回0
VAR4AA赋值:如果((收盘价)/(1日前的收盘价)>1.05)AND((最高价)/(收盘价)<1.01)AND(VAR3AA>0),返回91,否则返回0
当满足条件(VAR4AA>90)的45日过滤时,在(最低价)*(0.93)位置书写文字,画黄色
A赋值:(3*收盘价+最低价+开盘价+最高价)/6
X赋值:(20*A+19*1日前的A+18*2日前的A+17*3日前的A+16*4日前的A+15*5日前的A+14*6日前的A+13*7日前的A+12*8日前的A+11*9日前的A+10*10日前的A+9*11日前的A+8*12日前的A+7*13日前的A+6*14日前的A+5*15日前的A+4*16日前的A+3*17日前的A+2*18日前的A+20日前的A)/210
输出生命线:X的13日指数移动平均,线宽为2,画洋红色
```
